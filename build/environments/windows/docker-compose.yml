  
version: "3.4"

services:
  web:
    build:
      context: ./www
    container_name: fast-www
    deploy:
      labels:
        com.design.fast: "FAST Design"
      replicas: 2
      resources:
        limits:
          cpus: "0.1"
          memory: 50M
      restart_policy: 
        condition: on-failure
    image: smebberson/alpine-nginx-nodejs
    networks: 
      - fast-elb

    ports:
      - "3000:80"
      - "3001:443"
    restart: always
    working_dir: /var/www/html
    volumes:
      - ./public/:/var/www/html

networks:
  fast-elb: 