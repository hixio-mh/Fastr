**Status**: Draft

# Abstract

The CSS controls consist of an abstract control and two extended controls, CSS styles and CSS stylesheets. These controls will provide a way to interpret CSS strings for inline (styles) and CSS stylesheets into form UI and back to strings.

## Build script

The package should have a `devDependency` for [MDN data](https://www.npmjs.com/package/mdn-data) and re-interpret the properties based on this. To only require what is needed there should be a build script which takes the MDN data and converts it to a `.ts` file with exports conforming to an interface which defines the example provided in [Variables](#variables).

## Variables

There should be a list of variables that are assigned to each CSS property. The structure should look like this:

```typescript
[
    {
        "border": { // The property name should be pascalCase
            name: "border", // The name should be spinal-case
            shorthand: true, // denotes that "border" CSS property is a shorthand
            default: "none",
            globalValues: [
                {
                    value: "inherit"
                },
                {
                    value: "initial"
                },
                {
                    value: "unset"
                }
            ],
            values: [ // these must be in order
                {
                    mapsToCssProperty: "border-width",
                    type: "width",
                    default: "1px"
                },
                {
                    mapsToCssProperty: "border-style",
                    type: "border-style",
                    default: "solid"
                },
                {
                    mapsToCssProperty: "border-color",
                    type: "color",
                    default: "black"
                }
            ]
        }
    },
    // Complete list of all potential CSS properties
]
```

From this structure we can construct via the UI generated from the below methods: `border: 1px solid red`.

## Wireframe

A basic wireframe showing the border, margin and color interpretations:

![example-css-custom-control-wireframes.png](./example-css-custom-control-wireframes.png)

## Methods

### Render methods

Render methods should be created for form elements. Depending on the type of string these CSS properties ultimately represent, an appropriate form element or set of form elements should be generated.

Further rules will need to be defined based on [MDN CSS syntax](https://github.com/mdn/data/blob/master/css/syntaxes.json).

#### Text field

Used for:
    - a default value if the property name is not recognized

Example value:
```css
{
    foo: bar;
}
```

#### Autocomplete dropdown

Used for:
    - the property name selector, once this has been chosen, the value should reflect different inputs
    - color (full list of available colors can be autocompleted)
    - border-style

Example value:
```css
{
    border: solid;
}
```

#### CSS function

When a property can use a `var()`, `calc()` or any other CSS function it should have a way to switch to that input type, presented as a dropdown of available CSS functions, each of which will extend from a `CSSFunction` class. 

Used for:
    - anything which could use a CSS function such as `var()`, `calc()`

```css
{
    color: var(--my-color);
}
```

#### Number field + Autocomplete dropdown

Used for:
    - width (the select will be populated by `px`, `em`, etc.)

```css
{
    width: 20px;
}
```

### Utility methods

Data conversion utilities should exist to transform strings to objects and objects to strings. Objects will be stored as part of the components state, while strings will be returned during update.
Some utilities that may be required:
- `convertObjectToCSS` - convert an object + selectors to a CSS string, if no selectors are available convert it to the inline style equivalent.
- `convertCSSToObject` - convert a string to an object + selectors (if available)

## Overrides

To make this flexible, the abstract class should allow a way to override the default creation of any property. The implementation of this in the CSS styles or CSS stylesheets controls may look like:

```tsx
<CSSStyles
    // This is true be default as setting shorthand is more user friendly, 
    // if set to false, all non-shorthand values short up eg. "border-style"
    shorthandOnly={true}
    controls={[
        new StandardCSSControlPlugin({
            name: "border",
            control: (config) => {
                return (
                    <input
                        type={"text"}
                        value={config.value}
                    />
                )
            }
        })
    ]}
/>
```

## CSS Styles

The primary goal of the component is to take strings that would conform to CSS inline style properties such as `"border: red; color: green;"` and re-interpret them back out using UI generated by the [render methods](#render-methods).

## CSS Stylesheet

The primary goal of the component is to take strings that would conform to CSS stylesheet properties such as:

```
":host {
    border: red;
    color: green;
}"
```

Then re-interpret them back out using UI generated by the render [Methods](#methods).

For this control there are additional requirements for selectors, whereby the default is the `:host` and futher selectors can be added, as an example:

```css
:host {
    --border-color: red;
    --text-color: green;
}

div {
    border: var(--border-color);
    color: var(--text-color);
}
```

The `:host` should not be editable but other selectors should be text-fields when clicked.

## Additional notes

The purpose of this control is to work in a similar fashion to the developer tools in Chromium. Extending off of this work, the autocomplete dropdowns and number fields should provide a more intuitive UI for users by displaying default values.
